3:I[9275,[],""]
5:I[1343,[],""]
6:I[8700,["599","static/chunks/ebde5ed1-51545511fe0d5050.js","231","static/chunks/231-34a6a67d2da26855.js","827","static/chunks/827-69594f61c16b8a9c.js","850","static/chunks/850-ecf153581cc02044.js","185","static/chunks/app/layout-54bebb918ae7f176.js"],"ThemeProviders"]
7:I[4080,["599","static/chunks/ebde5ed1-51545511fe0d5050.js","231","static/chunks/231-34a6a67d2da26855.js","827","static/chunks/827-69594f61c16b8a9c.js","850","static/chunks/850-ecf153581cc02044.js","185","static/chunks/app/layout-54bebb918ae7f176.js"],""]
8:I[9032,["599","static/chunks/ebde5ed1-51545511fe0d5050.js","231","static/chunks/231-34a6a67d2da26855.js","827","static/chunks/827-69594f61c16b8a9c.js","850","static/chunks/850-ecf153581cc02044.js","185","static/chunks/app/layout-54bebb918ae7f176.js"],"KBarSearchProvider"]
9:I[231,["231","static/chunks/231-34a6a67d2da26855.js","827","static/chunks/827-69594f61c16b8a9c.js","797","static/chunks/app/blog/%5B...slug%5D/page-bd056182432da53b.js"],""]
a:I[8173,["231","static/chunks/231-34a6a67d2da26855.js","827","static/chunks/827-69594f61c16b8a9c.js","797","static/chunks/app/blog/%5B...slug%5D/page-bd056182432da53b.js"],"Image"]
b:I[509,["599","static/chunks/ebde5ed1-51545511fe0d5050.js","231","static/chunks/231-34a6a67d2da26855.js","827","static/chunks/827-69594f61c16b8a9c.js","850","static/chunks/850-ecf153581cc02044.js","185","static/chunks/app/layout-54bebb918ae7f176.js"],"KBarButton"]
c:I[1398,["599","static/chunks/ebde5ed1-51545511fe0d5050.js","231","static/chunks/231-34a6a67d2da26855.js","827","static/chunks/827-69594f61c16b8a9c.js","850","static/chunks/850-ecf153581cc02044.js","185","static/chunks/app/layout-54bebb918ae7f176.js"],"default"]
d:I[7606,["599","static/chunks/ebde5ed1-51545511fe0d5050.js","231","static/chunks/231-34a6a67d2da26855.js","827","static/chunks/827-69594f61c16b8a9c.js","850","static/chunks/850-ecf153581cc02044.js","185","static/chunks/app/layout-54bebb918ae7f176.js"],"default"]
e:I[7510,["599","static/chunks/ebde5ed1-51545511fe0d5050.js","231","static/chunks/231-34a6a67d2da26855.js","827","static/chunks/827-69594f61c16b8a9c.js","850","static/chunks/850-ecf153581cc02044.js","185","static/chunks/app/layout-54bebb918ae7f176.js"],"default"]
f:I[8976,["599","static/chunks/ebde5ed1-51545511fe0d5050.js","231","static/chunks/231-34a6a67d2da26855.js","827","static/chunks/827-69594f61c16b8a9c.js","850","static/chunks/850-ecf153581cc02044.js","185","static/chunks/app/layout-54bebb918ae7f176.js"],"default"]
4:["slug","database/Innodb-engine","c"]
0:["AO1lBacSEqBfLSl9iFzzQ",[[["",{"children":["blog",{"children":[["slug","database/Innodb-engine","c"],{"children":["__PAGE__?{\"slug\":[\"database\",\"Innodb-engine\"]}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","database/Innodb-engine","c"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/a9b9096fa657c0d0.css","precedence":"next","crossOrigin":"$undefined"}]]}],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"en-us","className":"__variable_dd5b2f scroll-smooth","suppressHydrationWarning":true,"children":[["$","head",null,{"children":[["$","link",null,{"rel":"icon","type":"image/png","href":"https://mainjaylai.github.io/favicon.png"}],["$","link",null,{"rel":"manifest","href":"/static/favicons/manifest.json"}],["$","meta",null,{"name":"msapplication-TileColor","content":"#000000"}],["$","link",null,{"href":"https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200..900&display=swap","rel":"stylesheet"}],["$","link",null,{"href":"https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&family=ZCOOL+QingKe+HuangYou&family=ZCOOL+XiaoWei&display=swap","rel":"stylesheet"}],["$","script",null,{"src":"https://us.umami.is/script.js","async":true}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: light)","content":"#fff"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: dark)","content":"#000"}],["$","meta",null,{"name":"referrer","content":"no-referrer"}],["$","script",null,{"src":"https://cdn.jsdelivr.net/gh/ashishagarwal2023/freegptjs@1.0.2/src/freegpt.min.js"}],["$","link",null,{"rel":"alternate","type":"application/rss+xml","href":"/feed.xml"}]]}],["$","body",null,{"className":"bg-white pl-[calc(100vw-100%)] text-black antialiased dark:bg-gray-950 dark:text-white","suppressHydrationWarning":true,"children":["$","$L6",null,{"children":[["$undefined","$undefined","$undefined",["$","$L7",null,{"async":true,"defer":true,"data-website-id":"bbe21cb3-3de3-4ba7-b6de-453053bc6ae8","src":"https://us.umami.is/script.js"}],"$undefined","$undefined"],["$","section",null,{"className":"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0","children":["$","div",null,{"className":"flex h-screen flex-col justify-between font-sans","children":[["$","$L8",null,{"kbarConfig":{"searchDocumentsPath":"/search.json"},"children":[["$","header",null,{"className":"flex items-center justify-between py-5","children":[["$","div",null,{"children":["$","$L9",null,{"href":"/","aria-label":"Blog","children":["$","div",null,{"className":"flex items-center justify-between","children":[["$","div",null,{"className":"mr-3","children":["$","$La",null,{"src":"https://mainjaylai.github.io/favicon.png","width":44,"height":44,"alt":"logo"}]}],["$","div",null,{"className":"hidden h-[44px] text-center text-3xl font-semibold leading-10 sm:block","children":"Blog"}]]}]}]}],["$","div",null,{"className":"flex items-center space-x-4 leading-5 sm:space-x-6","children":[[["$","$L9",null,{"href":"/blog","className":"navbar-item hidden font-medium text-gray-900 dark:text-gray-100 sm:block","children":"Blog"}],["$","$L9",null,{"href":"/tags","className":"navbar-item hidden font-medium text-gray-900 dark:text-gray-100 sm:block","children":"Tags"}],["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://mainjaylai.github.io","className":"navbar-item hidden font-medium text-gray-900 dark:text-gray-100 sm:block","children":"About"}]],["$","$Lb",null,{"aria-label":"Search","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","strokeWidth":1.5,"stroke":"currentColor","className":"h-6 w-6 text-gray-900 dark:text-gray-100","children":["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","d":"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}]}]}],["$","$Lc",null,{}],["$","$Ld",null,{}],["$","$Le",null,{}],["$","$Lf",null,{}]]}]]}],["$","main",null,{"className":"mb-auto","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"className":"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6","children":[["$","div",null,{"className":"space-x-2 pb-8 pt-6 md:space-y-5","children":["$","h1",null,{"className":"text-6xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 md:border-r-2 md:px-6 md:text-8xl md:leading-14","children":"404"}]}],["$","div",null,{"className":"max-w-md","children":[["$","p",null,{"className":"mb-4 text-xl font-bold leading-normal md:text-2xl","children":"Sorry we couldn't find this page."}],["$","p",null,{"className":"mb-8","children":"But dont worry, you can find plenty of other things on our homepage."}],["$","$L9",null,{"href":"/","className":"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium leading-5 text-white shadow transition-colors duration-150 hover:bg-blue-700 focus:outline-none dark:hover:bg-blue-500","children":"Back to homepage"}]]}]]}],"notFoundStyles":[],"styles":null}]}]]}],["$","footer",null,{"children":["$","div",null,{"className":"mt-16 flex flex-col items-center","children":[["$","div",null,{"className":"mb-3 flex space-x-4","children":[["$","a",null,{"className":"text-sm !text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"mailto:mainjaylai@outlook.com","children":[["$","span",null,{"className":"sr-only","children":"mail"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 20 20","className":"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6","children":[["$","path",null,{"d":"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}],["$","path",null,{"d":"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"}]]}]]}],["$","a",null,{"className":"text-sm !text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/mainjaylai","children":[["$","span",null,{"className":"sr-only","children":"github"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6","children":["$","path",null,{"d":"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"}]}]]}],["$","a",null,{"className":"text-sm !text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://gitlab.com/JayMain","children":[["$","span",null,{"className":"sr-only","children":"gitlab"}],["$","svg",null,{"viewBox":"0 0 1024 1024","xmlns":"http://www.w3.org/2000/svg","className":"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6","width":"200","height":"200","children":["$","path",null,{"d":"M1022.08 579.712l-57.258667-176.426667-113.664-349.397333a19.413333 19.413333 0 0 0-36.992 0L700.501333 403.2H323.498667L209.877333 53.888C204.074667 35.84 178.56 35.84 172.8 53.76L59.136 403.157333 1.877333 579.712a39.424 39.424 0 0 0 14.122667 43.648L512 983.637333l496-360.234666a39.253333 39.253333 0 0 0 14.08-43.690667"}]}]]}],["$","a",null,{"className":"text-sm !text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://gitee.com/lmj2001","children":[["$","span",null,{"className":"sr-only","children":"gitee"}],["$","svg",null,{"viewBox":"0 0 1024 1024","xmlns":"http://www.w3.org/2000/svg","className":"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-6 w-6","width":"200","height":"200","children":["$","path",null,{"d":"M512 992C246.895625 992 32 777.104375 32 512S246.895625 32 512 32s480 214.895625 480 480-214.895625 480-480 480z m242.9521875-533.3278125h-272.56875a23.7121875 23.7121875 0 0 0-23.71125 23.7121875l-0.024375 59.255625c0 13.08 10.6078125 23.7121875 23.6878125 23.7121875h165.96c13.104375 0 23.7121875 10.6078125 23.7121875 23.6878125v11.855625a71.1121875 71.1121875 0 0 1-71.1121875 71.1121875h-225.215625a23.7121875 23.7121875 0 0 1-23.6878125-23.7121875V423.1278125a71.1121875 71.1121875 0 0 1 71.0878125-71.1121875h331.824375a23.7121875 23.7121875 0 0 0 23.6878125-23.71125l0.0721875-59.2565625a23.7121875 23.7121875 0 0 0-23.68875-23.7121875H423.08a177.76875 177.76875 0 0 0-177.76875 177.7921875V754.953125c0 13.1034375 10.60875 23.7121875 23.713125 23.7121875h349.63125a159.984375 159.984375 0 0 0 159.984375-159.984375V482.36a23.7121875 23.7121875 0 0 0-23.7121875-23.6878125z"}]}]]}]]}],["$","div",null,{"className":"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400","children":[["$","div",null,{"children":"MainJayLai"}],["$","div",null,{"children":" • "}],["$","div",null,{"children":"© 2025"}],["$","div",null,{"children":" • "}],["$","$L9",null,{"href":"/","children":"MainJayLai Blog"}]]}]]}]}]]}]}]]}]}]]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/c890694439b2475b.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/1ea5cf861ee12a80.css","precedence":"next","crossOrigin":"$undefined"}]],"$L10"]]]]
11:I[4347,["231","static/chunks/231-34a6a67d2da26855.js","827","static/chunks/827-69594f61c16b8a9c.js","797","static/chunks/app/blog/%5B...slug%5D/page-bd056182432da53b.js"],"default"]
12:I[9629,["231","static/chunks/231-34a6a67d2da26855.js","827","static/chunks/827-69594f61c16b8a9c.js","797","static/chunks/app/blog/%5B...slug%5D/page-bd056182432da53b.js"],"default"]
2:[["$","script",null,{"type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":\"InnoDB 引擎\",\"datePublished\":\"2024-10-22T00:00:00.000Z\",\"dateModified\":\"2024-10-22T00:00:00.000Z\",\"description\":\"InnoDB 是 MySQL 的默认存储引擎，提供了 ACID 事务支持、行级锁定、外键约束等特性。通过多版本并发控制（MVCC）机制实现了高并发性能，同时保证了数据的一致性和可靠性。\",\"image\":\"https://pngimg.com/uploads/github/github_PNG80.png\",\"url\":\"https://blog.mainjay.cloudns.ch/blog/database/Innodb-engine\",\"author\":[{\"@type\":\"Person\",\"name\":\"mainJayLai\"}]}"}}],["$","section",null,{"className":"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0","children":[["$","$L11",null,{}],["$","article",null,{"children":["$","div",null,{"children":[["$","header",null,{"children":["$","div",null,{"className":"space-y-1 border-b border-gray-200 pb-10 text-center dark:border-gray-700","children":[["$","div",null,{"className":"beautiful-chinese-title","children":["$","h1",null,{"className":"text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14","children":"InnoDB 引擎"}]}],["$","dl",null,{"children":["$","div",null,{"children":[["$","dt",null,{"className":"sr-only","children":"Published on"}],["$","dd",null,{"className":"text-base font-medium leading-6 text-gray-500 dark:text-gray-400","children":["$","time",null,{"dateTime":"2024-10-22T00:00:00.000Z","children":"October 22, 2024"}]}]]}]}]]}]}],["$","div",null,{"className":"grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:divide-y-0","children":[["$","div",null,{"className":"divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0","children":["$","div",null,{"className":"beautiful-chinese-content prose max-w-none pb-8 pt-10 dark:prose-invert","children":[["$","h2",null,{"className":"content-header","id":"innodb-简介","children":[["$","a",null,{"href":"#innodb-简介","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"InnoDB 简介"]}],["$","p",null,{"children":["InnoDB 是 MySQL 的默认存储引擎，专为高可靠性和高性能而设计。自 MySQL 8.4 起，InnoDB 成为默认的存储引擎，除非另行配置，否则 ",["$","code",null,{"className":"custom-code","children":"CREATE TABLE"}]," 语句会默认创建 InnoDB 表。"]}],["$","h3",null,{"className":"content-header","id":"innodb-的主要优势","children":[["$","a",null,{"href":"#innodb-的主要优势","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"InnoDB 的主要优势"]}],["$","ol",null,{"children":[["$","li",null,{"children":["$","p",null,{"children":["InnoDB 的 DML 操作遵循 ",["$","strong",null,{"children":"ACID 模型"}],"，提供事务的提交、回滚和崩溃恢复功能，确保用户数据的安全性和一致性。"]}]}],["$","li",null,{"children":["$","p",null,{"children":["通过",["$","strong",null,{"children":"行级锁定"}],"和 Oracle 风格的一致性读取，InnoDB 提高了多用户环境下的并发性和性能。"]}]}],["$","li",null,{"children":["$","p",null,{"children":["InnoDB 表在磁盘上以优化的方式排列数据，特别是针对主键的查询。每个 InnoDB 表都有一个称为",["$","strong",null,{"children":"聚簇索引"}],"的主键索引，组织数据以最小化主键查找的 I/O 操作。"]}]}],["$","li",null,{"children":["$","p",null,{"children":["为了维护数据完整性，InnoDB 支持",["$","strong",null,{"children":"外键约束"}],"。外键确保插入、更新和删除操作不会导致相关表之间的数据不一致。"]}]}]]}],["$","h3",null,{"className":"content-header","id":"innodb-表的规则","children":[["$","a",null,{"href":"#innodb-表的规则","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"InnoDB 表的规则"]}],["$","ol",null,{"children":[["$","li",null,{"children":["$","p",null,{"children":["为每个表指定一个主键，使用最常查询的列或列组合，或者在没有明显主键的情况下使用",["$","strong",null,{"children":"自增值"}],"。"]}]}],["$","li",null,{"children":["$","p",null,{"children":["当从多个表中提取数据时，使用",["$","strong",null,{"children":"连接操作"}],"。为了快速的连接性能，在连接列上定义外键，并在每个表中声明相同的数据类型。添加外键可以确保引用的列被索引，从而提高性能。外键还可以传播删除和更新到所有受影响的表，并防止在子表中插入数据时，如果父表中不存在相应的 ID。"]}]}],["$","li",null,{"children":["$","p",null,{"children":[["$","strong",null,{"children":"关闭自动提交"}],"。每秒提交数百次会限制性能（受限于存储设备的写入速度）。"]}]}],["$","li",null,{"children":["$","p",null,{"children":["通过使用 ",["$","code",null,{"className":"custom-code","children":"START TRANSACTION"}]," 和 ",["$","code",null,{"className":"custom-code","children":"COMMIT"}]," 语句将相关的 DML 操作分组到事务中。虽然不希望过于频繁地提交，但也不希望发出运行数小时而不提交的大批量 ",["$","code",null,{"className":"custom-code","children":"INSERT"}],"、",["$","code",null,{"className":"custom-code","children":"UPDATE"}]," 或 ",["$","code",null,{"className":"custom-code","children":"DELETE"}]," 语句。"]}]}],["$","li",null,{"children":["$","p",null,{"children":["不要使用 ",["$","code",null,{"className":"custom-code","children":"LOCK TABLES"}]," 语句。InnoDB 可以处理多个会话同时读取和写入同一个表而不牺牲可靠性或高性能。要获得对一组行的独占写访问，请使用 ",["$","code",null,{"className":"custom-code","children":"SELECT ... FOR UPDATE"}]," 语法仅锁定您打算更新的行。"]}]}],["$","li",null,{"children":["$","p",null,{"children":["启用 ",["$","code",null,{"className":"custom-code","children":"innodb_file_per_table"}]," 变量或使用通用表空间将表的数据和索引放入单独的文件中，而不是系统表空间。",["$","code",null,{"className":"custom-code","children":"innodb_file_per_table"}]," 变量默认启用。"]}]}],["$","li",null,{"children":["$","p",null,{"children":"评估您的数据和访问模式是否受益于 InnoDB 表或页面压缩功能。您可以在不牺牲读/写能力的情况下压缩 InnoDB 表。"}]}],["$","li",null,{"children":["$","p",null,{"children":["使用 ",["$","code",null,{"className":"custom-code","children":"--sql_mode=NO_ENGINE_SUBSTITUTION"}]," 选项运行服务器，以防止使用您不想使用的存储引擎创建表。"]}]}]]}],["$","h2",null,{"className":"content-header","id":"innodb-和-acid-模型","children":[["$","a",null,{"href":"#innodb-和-acid-模型","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"InnoDB 和 ACID 模型"]}],["$","p",null,{"children":[["$","strong",null,{"children":"ACID 模型"}],"是一组数据库设计原则，强调对业务数据和关键任务应用程序至关重要的可靠性方面。MySQL 包含如 InnoDB 存储引擎等组件，严格遵循 ACID 模型，以确保数据不被损坏，结果不因软件崩溃和硬件故障等异常情况而失真。依赖于 ACID 兼容的功能，您无需重新发明一致性检查和崩溃恢复机制的轮子。在某些情况下，如果您有额外的软件保护、超可靠的硬件，或可以容忍少量数据丢失或不一致的应用程序，您可以调整 MySQL 设置，以在某些 ACID 可靠性和更高性能或吞吐量之间进行权衡。"]}],["$","p",null,{"children":"以下部分讨论了 MySQL 特性，特别是 InnoDB 存储引擎如何与 ACID 模型的各个类别交互："}],["$","h3",null,{"className":"content-header","id":"a-原子性","children":[["$","a",null,{"href":"#a-原子性","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"A: 原子性"]}],["$","p",null,{"children":"原子性主要涉及 InnoDB 事务。相关的 MySQL 特性包括："}],["$","ul",null,{"children":[["$","li",null,{"children":[["$","code",null,{"className":"custom-code","children":"autocommit"}]," 设置。"]}],["$","li",null,{"children":[["$","code",null,{"className":"custom-code","children":"COMMIT"}]," 语句。"]}],["$","li",null,{"children":[["$","code",null,{"className":"custom-code","children":"ROLLBACK"}]," 语句。"]}]]}],["$","h3",null,{"className":"content-header","id":"c-一致性","children":[["$","a",null,{"href":"#c-一致性","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"C: 一致性"]}],["$","p",null,{"children":"一致性主要涉及 InnoDB 内部处理以保护数据免受崩溃影响。相关的 MySQL 特性包括："}],["$","ul",null,{"children":[["$","li",null,{"children":"InnoDB 双写缓冲区。"}],["$","li",null,{"children":"InnoDB 崩溃恢复。"}]]}],["$","h3",null,{"className":"content-header","id":"i-隔离性","children":[["$","a",null,{"href":"#i-隔离性","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"I: 隔离性"]}],["$","p",null,{"children":"隔离性主要涉及 InnoDB 事务，特别是适用于每个事务的隔离级别。相关的 MySQL 特性包括："}],["$","ul",null,{"children":[["$","li",null,{"children":[["$","code",null,{"className":"custom-code","children":"autocommit"}]," 设置。"]}],["$","li",null,{"children":["事务隔离级别和 ",["$","code",null,{"className":"custom-code","children":"SET TRANSACTION"}]," 语句。"]}],["$","li",null,{"children":["InnoDB 锁定的低级细节。可以在 ",["$","code",null,{"className":"custom-code","children":"INFORMATION_SCHEMA"}]," 表（“InnoDB INFORMATION_SCHEMA 事务和锁定信息”）和 ",["$","code",null,{"className":"custom-code","children":"Performance Schema"}]," 的 ",["$","code",null,{"className":"custom-code","children":"data_locks"}]," 和 ",["$","code",null,{"className":"custom-code","children":"data_lock_waits"}]," 表中查看。"]}]]}],["$","h3",null,{"className":"content-header","id":"d-持久性","children":[["$","a",null,{"href":"#d-持久性","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"D: 持久性"]}],["$","p",null,{"children":"持久性涉及 MySQL 软件特性与特定硬件配置的交互。由于取决于 CPU、网络和存储设备的能力，可能性众多，因此提供具体指南最为复杂。（这些指南可能采取“购买新硬件”的形式。）相关的 MySQL 特性包括："}],["$","ul",null,{"children":[["$","li",null,{"children":"InnoDB 双写缓冲区。"}],["$","li",null,{"children":[["$","code",null,{"className":"custom-code","children":"innodb_flush_log_at_trx_commit"}]," 变量。"]}],["$","li",null,{"children":[["$","code",null,{"className":"custom-code","children":"sync_binlog"}]," 变量。"]}],["$","li",null,{"children":[["$","code",null,{"className":"custom-code","children":"innodb_file_per_table"}]," 变量。"]}],["$","li",null,{"children":"存储设备（如磁盘驱动器、SSD 或 RAID 阵列）中的写缓冲。"}],["$","li",null,{"children":"存储设备中的电池支持缓存。"}],["$","li",null,{"children":["用于运行 MySQL 的操作系统，特别是其对 ",["$","code",null,{"className":"custom-code","children":"fsync()"}]," 系统调用的支持。"]}],["$","li",null,{"children":["保护所有运行 MySQL 服务器和存储 MySQL 数据的计算机服务器和存储设备电力的",["$","strong",null,{"children":"不间断电源（UPS）"}],"。"]}],["$","li",null,{"children":"您的备份策略，例如备份的频率和类型，以及备份保留期。"}],["$","li",null,{"children":"对于分布式或托管数据应用程序，MySQL 服务器硬件所在数据中心的特定特性，以及数据中心之间的网络连接。"}]]}],["$","h2",null,{"className":"content-header","id":"innodb-多版本控制","children":[["$","a",null,{"href":"#innodb-多版本控制","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"InnoDB 多版本控制"]}],["$","p",null,{"children":"InnoDB 是一个多版本存储引擎。它保留关于已更改行的旧版本的信息，以支持事务特性，如并发性和回滚。这些信息存储在称为回滚段的撤销表空间中。InnoDB 使用回滚段中的信息来执行事务回滚所需的撤销操作。它还使用这些信息来构建一致读取的早期版本的行。"}],["$","p",null,{"children":"在内部，InnoDB 为存储在数据库中的每一行添加三个字段："}],["$","ul",null,{"children":[["$","li",null,{"children":["一个 6 字节的 ",["$","code",null,{"className":"custom-code","children":"DB_TRX_ID"}]," 字段，指示最后插入或更新该行的事务标识符。此外，删除在内部被视为一种更新，其中行中的一个特殊位被设置为标记为已删除。"]}],["$","li",null,{"children":["一个 7 字节的 ",["$","code",null,{"className":"custom-code","children":"DB_ROLL_PTR"}]," 字段，称为回滚指针。回滚指针指向写入回滚段的撤销日志记录。如果行被更新，撤销日志记录包含在更新前重建行内容所需的信息。"]}],["$","li",null,{"children":["一个 6 字节的 ",["$","code",null,{"className":"custom-code","children":"DB_ROW_ID"}]," 字段，包含一个随着新行插入而单调增加的行 ID。如果 InnoDB 自动生成聚簇索引，则索引包含行 ID 值。否则，",["$","code",null,{"className":"custom-code","children":"DB_ROW_ID"}]," 列不会出现在任何索引中。"]}]]}],["$","p",null,{"children":"回滚段中的撤销日志分为插入和更新撤销日志。插入撤销日志仅在事务回滚时需要，并且可以在事务提交后立即丢弃。更新撤销日志也用于一致读取，但只有在没有事务存在的情况下，InnoDB 为其分配了一个快照，在一致读取中可能需要更新撤销日志中的信息来构建数据库行的早期版本时，才能丢弃它们。"}],["$","p",null,{"children":"建议您定期提交事务，包括仅发出一致读取的事务。否则，InnoDB 无法从更新撤销日志中丢弃数据，回滚段可能会变得过大，填满其所在的撤销表空间。"}],["$","p",null,{"children":"回滚段中撤销日志记录的物理大小通常小于相应的插入或更新行。您可以使用此信息来计算回滚段所需的空间。"}],["$","p",null,{"children":"在 InnoDB 多版本控制方案中，当您使用 SQL 语句删除行时，该行不会立即从数据库中物理删除。InnoDB 仅在丢弃为删除写入的更新撤销日志记录时，才物理删除相应的行及其索引记录。此删除操作称为清除，速度相当快，通常与执行删除的 SQL 语句所需的时间相同。"}],["$","p",null,{"children":["如果您以大约相同的速率在表中插入和删除小批量的行，清除线程可能会开始滞后，并且由于所有“死”行，表可能会变得越来越大，使一切都依赖于磁盘并且非常慢。在这种情况下，限制新行操作，并通过调整 ",["$","code",null,{"className":"custom-code","children":"innodb_max_purge_lag"}]," 系统变量为清除线程分配更多资源。"]}],["$","h3",null,{"className":"content-header","id":"多版本控制和二级索引","children":[["$","a",null,{"href":"#多版本控制和二级索引","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"多版本控制和二级索引"]}],["$","p",null,{"children":"InnoDB 多版本并发控制（MVCC）对二级索引的处理方式与聚簇索引不同。聚簇索引中的记录是就地更新的，其隐藏的系统列指向撤销日志条目，可以从中重建记录的早期版本。与聚簇索引记录不同，二级索引记录不包含隐藏的系统列，也不是就地更新的。"}],["$","p",null,{"children":["当更新二级索引列时，旧的二级索引记录被标记为删除，新的记录被插入，标记为删除的记录最终被清除。当二级索引记录被标记为删除或二级索引页被较新的事务更新时，InnoDB 在聚簇索引中查找数据库记录。在聚簇索引中，检查记录的 ",["$","code",null,{"className":"custom-code","children":"DB_TRX_ID"}],"，如果记录在读取事务启动后被修改，则从撤销日志中检索记录的正确版本。"]}],["$","p",null,{"children":"如果二级索引记录被标记为删除或二级索引页被较新的事务更新，则不使用覆盖索引技术。InnoDB 不从索引结构返回值，而是在聚簇索引中查找记录。"}],["$","p",null,{"children":"然而，如果启用了索引条件下推（ICP）优化，并且可以仅使用索引中的字段评估 WHERE 条件的部分，MySQL 服务器仍然会将 WHERE 条件的这一部分下推到存储引擎，在那里使用索引进行评估。如果没有找到匹配的记录，则避免聚簇索引查找。如果找到匹配的记录，即使在标记为删除的记录中，InnoDB 也会在聚簇索引中查找记录。"}]]}]}],["$","div",null,{"className":"pb-6 pt-6 text-center text-gray-700 dark:text-gray-300","id":"comment","children":["$","$L12",null,{"slug":"database/Innodb-engine"}]}],["$","footer",null,{"children":["$","div",null,{"className":"flex flex-col text-sm font-medium sm:flex-row sm:justify-between sm:text-base","children":[["$","div",null,{"className":"pt-4 xl:pt-8","children":["$","$L9",null,{"href":"/blog/security/encrypted-email-protocol","className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","aria-label":"Previous post: 加密流量中邮件协议的识别","children":["← ","加密流量中邮件协议的识别"]}]}],["$","div",null,{"className":"pt-4 xl:pt-8","children":["$","$L9",null,{"href":"/blog/algorithm/segment-tree","className":"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400","aria-label":"Next post: 线段树（Segment Tree）详解","children":["线段树（Segment Tree）详解"," →"]}]}]]}]}]]}]]}]}]]}]]
10:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"InnoDB 引擎"}],["$","meta","3",{"name":"description","content":"InnoDB 是 MySQL 的默认存储引擎，提供了 ACID 事务支持、行级锁定、外键约束等特性。通过多版本并发控制（MVCC）机制实现了高并发性能，同时保证了数据的一致性和可靠性。"}],["$","meta","4",{"name":"robots","content":"index, follow"}],["$","meta","5",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","link","6",{"rel":"canonical","href":"https://blog.mainjay.cloudns.ch/blog/database/Innodb-engine"}],["$","link","7",{"rel":"alternate","type":"application/rss+xml","href":"https://blog.mainjay.cloudns.ch/feed.xml"}],["$","meta","8",{"property":"og:title","content":"InnoDB 引擎"}],["$","meta","9",{"property":"og:description","content":"InnoDB 是 MySQL 的默认存储引擎，提供了 ACID 事务支持、行级锁定、外键约束等特性。通过多版本并发控制（MVCC）机制实现了高并发性能，同时保证了数据的一致性和可靠性。"}],["$","meta","10",{"property":"og:url","content":"https://blog.mainjay.cloudns.ch/blog/database/Innodb-engine"}],["$","meta","11",{"property":"og:site_name","content":"MainJayLai Blog"}],["$","meta","12",{"property":"og:locale","content":"en_US"}],["$","meta","13",{"property":"og:image","content":"https://pngimg.com/uploads/github/github_PNG80.png"}],["$","meta","14",{"property":"og:type","content":"article"}],["$","meta","15",{"property":"article:published_time","content":"2024-10-22T00:00:00.000Z"}],["$","meta","16",{"property":"article:modified_time","content":"2024-10-22T00:00:00.000Z"}],["$","meta","17",{"property":"article:author","content":"mainJayLai"}],["$","meta","18",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","19",{"name":"twitter:title","content":"InnoDB 引擎"}],["$","meta","20",{"name":"twitter:description","content":"InnoDB 是 MySQL 的默认存储引擎，提供了 ACID 事务支持、行级锁定、外键约束等特性。通过多版本并发控制（MVCC）机制实现了高并发性能，同时保证了数据的一致性和可靠性。"}],["$","meta","21",{"name":"twitter:image","content":"https://pngimg.com/uploads/github/github_PNG80.png"}],["$","meta","22",{"name":"next-size-adjust"}]]
1:null
